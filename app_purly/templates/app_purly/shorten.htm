{% extends "app_purly/base.html" %}

{% block title %}purly: URL Shortener{% endblock %}

{% block body_header %}<h1><a href="/shorten">purly</a> <small>&mdash; shorten any URL &mdash; and optionally track its use</small></h1>{% endblock %}
  
{% block content %}

<style>
BODY {
    font-size: 126%;
}
LABEL, OPTION {
    font-size: 144%;
}
INPUT.input-sm:not(.borderless) {
    font-size: 162%;
}
.form-row {
    border-bottom: 1px solid #ddd;
    padding-bottom: 1em;
    margin-bottom: 1em;
}
#long_url_acceptability_result{
    display: inline-block;
    min-height: 36px;
    vertical-align: bottom;
    margin: 3px 5px;
    border: 1px solid #eee;
    background: #f1f1f1;
    padding: 3px 7px;
}
#long_url_acceptability_result .icon36.waiting {
    display: inline-block;
    padding: 0 0 0 36px;
    height: 36px;
    color: #365490;
    background: left center no-repeat url('data:image/png;base64,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');
}
#long_url_acceptability_result .icon36.warning {
    display: inline-block;
    padding: 0 0 0 36px;
    height: 36px;
    color: #ff1800;
    background: left center no-repeat url('data:image/png;base64,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');
}
#long_url_acceptability_result A[href^=mailto]{
    display: inline-block;
    padding: 0 0 0 36px;
    height: 36px;
    color: #545418;
    cursor: hand;
    background: left center no-repeat url('data:image/png;base64,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');
}
#long_url_acceptability_result A[href^=http]{
    display: inline-block;
    padding: 0 0 0 36px;
    height: 36px;
    color: #181890;
    cursor: hand;
    background: left center no-repeat url('data:image/png;base64,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');
}
#long_url_acceptability_result A[href^=https]{
    display: inline-block;
    padding: 0 0 0 36px;
    height: 36px;
    color: #007218;
    cursor: hand !important;
    background: left center no-repeat url('data:image/png;base64,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');
}
#btn_rebuild_tracking_parameters {
    padding: 1px 3px;
    background: #ffc;
    color: #079;
    font-size: 108%;
    font-weight: bolder;
}
#availability_indicator_block {
    padding: 0.9em;
}
INPUT.borderless {
    border: none;
}
#tracking_string {
    color: #258;
}
.qp {
    position: relative;
/*    top: -1px;*/
    margin-right: 0.54em;
    border-top: 1px solid #365;
    padding: 3px 5px 2px;
    background-color: #dfe;
    color: #365;
    cursor: hand;
}
</style>
<script>
function clearForm(form) {
    // clearing inputs
    var inputs = form.getElementsByTagName('input');
    for (var i = 0; i<inputs.length; i++) {
        switch (inputs[i].type) {
            // case 'hidden':
            case 'text':
                inputs[i].value = '';
                break;
            case 'radio':
            case 'checkbox':
                inputs[i].checked = false;   
        }
    }

    // clearing selects
    var selects = form.getElementsByTagName('select');
    for (var i = 0; i<selects.length; i++)
        selects[i].selectedIndex = 0;

    // clearing textarea
    var text= form.getElementsByTagName('textarea');
    for (var i = 0; i<text.length; i++)
        text[i].innerHTML= '';

    return false;
}


function toggle_pe_sld_directly(i){ // manually toggle whether or not the .PE options will appear for a short URL
    var $sel2 = $('#short_base OPTION[value="http://2s.pe/"]');
    var $sel4 = $('#short_base OPTION[value="http://4s.pe/"]');
    if(i==2){
        $sel2.show();
        $sel4.hide();
    }
    if(i==4){
        $sel4.show();
        $sel2.hide();
    }
}


function toggle_pe_sld_for_url(u){ // use the long URL to auto-toggle whether or not the .PE options will appear
    u = u || $('#canonical_url').val();
    toggle_pe_sld_directly( (u.toLowerCase().match(/^https?:\/\/www\.spe\.org+\//))? 2 : 4 );
}


function target_url_verification_helper(){
    var canonical_url=$('#canonical_url').val();
    var msg='', m = false;
    if( canonical_url.trim().length != canonical_url.length ){
        msg = 'looks like some whitespace is making this URL invalid; please fix that';
        canonical_url = canonical_url.trim();
        $('#canonical_url').val(canonical_url);
    }
    if( typeof canonical_url == 'string' && canonical_url.length>0 ){
    // we have some input, without leading or trailing whitespace
        m = canonical_url.toLowerCase().match(/^[a-zA-Z]+:/); if ( !m || m.length == 0 ) {
            msg = 'the scheme was not specified; adding "http://" for you (feel free to change it to https if needed)';//looks like a regular web link where someone forgot to provide the scheme prefix
            canonical_url = 'http://' + canonical_url;
            $('#canonical_url').val(canonical_url);
        }
        m = canonical_url.toLowerCase().match(/^(dev|qa)\./); if ( m && m.length > 0 ) {
            msg = 'please keep in mind that DEV and QA resources are only available internally';
        }
        if( canonical_url.toLowerCase().match(/^(https?:|mailto:|tel:\+|data:).+/) ) {

            // toggle_pe_sld_directly( (canonical_url.toLowerCase().match(/^https?:\/\/www\.spe\.org+\//))? 2 : 4 );

            var quick_test_needed = false;
            if (canonical_url.toLowerCase().match(/^https?:\/\/[^/]+[\/|$]/)) {
                msg = '';//looks like a regular web link; we should let the client handle tracking
                $('#tracking_type').val('c');
                quick_test_needed = true;
            }
            else if (canonical_url.toLowerCase().match(/^mailto:[a-z0-9]/)) {
                msg = 'looks like an email URL; we should track it server-side';
                $('#tracking_type').val('s');
            }
            else if (canonical_url.toLowerCase().match(/^tel:\+[0-9,p]+$/)) {
                msg = 'looks like a phone number URL; we should track it server-side';
                $('#tracking_type').val('s');
            }
            else if (canonical_url.toLowerCase().match(/^data:\+[0-9,p]+$/)) {
                msg = 'looks like a data URL; we should track it server-side';
                $('#tracking_type').val('s');
            }
            else {
                msg = 'unrecognized URL; please make sure it is valid';
                $('#tracking_type').val('n');
            }
        }
        else {
            msg='unsupported scheme; supported target URLs begin with http, https, mailto, tel, data';
            $('#tracking_type').val('n');
        }
    }
    else {
        msg='no URL provided; please enter one';
        $('#tracking_type').val('n');
    }

    toggle_pe_sld_for_url(canonical_url);

    if(msg.length > 0){
        alert(msg);
        return false;
    }
    return (quick_test_needed && is_long_url_acceptable());
}


function compute_short_code_suggestion(short_base){
    short_base = short_base || $('#short_base').val().trim();
//    var canonical_url = $('#canonical_url').val().trim();
    var m = ymm();
    for (l = 1; l <= 18; l++){
        prospective_short_code = '_' + m + generate_random_string(l, '0123456789acdefghjkmnpqrtvwxy');// omit "u" for safety
        prospective_short_url = short_base + prospective_short_code;
        $('#short_code').val(prospective_short_code);
        if( is_short_url_available(prospective_short_url) ){
            return prospective_short_code;
        }
        else {
            if(typeof console == 'object' && typeof console.log == 'function') console.log(prospective_short_url + ' is not available.');
            setTimeout( function(){ compute_short_code_suggestion(short_base);}, 180);
        }
    }
    return null;

    /*
    if(document.cookie && typeof document.cookie == 'string' && document.cookie.match(/email=/)){
        var i = document.cookie.match(/email=[^;$]+/)[0].replace(/^email=/,'').substr(0,3);
        var r = parseInt(Math.random() * 100);
        if(r.toString().length == 1) r = "0" + r.toString();
        return m + i + r;
    }
    else {
        return alert('To use this "suggest short code" feature, you must first log in.');
    }
    //*/
}

function vowel(){
    var mask = 'aeiouy', r = '';//, length = 1;
//    for (var i = length; i > 0; --i)
        r += mask[Math.floor(Math.random() * mask.length)];
    return r;
}

function random_char(char_class){
    var c = char_class || '0-9a-zA-Z';
    var mask = 'aeiouy', r = '';
}


function generate_random_string(i_length, s_chars) {
    var length = i_length || 1;
    var chars = s_chars || '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_';
    var mask = '';
    if (chars == 'portable') mask += '0123456789acdefghjkmnpqrtuvwxyAEFHKLMNQRTY';
    else if (chars == 'lowercase_portable') mask += '0123456789acdefghjkmnpqrtuvwxy';
    else {
        if (chars.indexOf('a') > -1) mask += 'abcdefghijklmnopqrstuvwxyz';
        if (chars.indexOf('A') > -1) mask += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        if (chars.indexOf('#') > -1) mask += '0123456789';
        if (chars.indexOf('!') > -1) mask += '~`!@#$%^&*()_+-={}[]:";\'<>?,./|\\';
    }
    var result = '';
    for (var i = length; i > 0; --i) result += mask[Math.floor(Math.random() * mask.length)];
    return result;
}


function toggle_opts_show(medium){
    m = (medium || 'all').toLowerCase();
    switch(m){
        case 'email':
        case 'web':
        case 'print':
        case 'social':
            $('#tracking_medium2 OPTGROUP').hide().filter('.show_for_'+m).show().find('OPTION').data('selectable',true);
            break;
        case '-':
        default:
            $('#tracking_medium2 OPTGROUP').show().find('OPTION').data('selectable',true);
            break;
    }
}


function is_short_url_available(short_url){// returns true if available, false if not, null if the check cannot happen
    if(typeof short_url == 'undefined'){
        var b = $('#short_base').val();
        var c = $('#short_code').val();
        if( b.length == 0 || c.length == 0) return null;
        short_url = b + c;
    }
    if(typeof short_url != 'string' || short_url.length < 13) return null;// minimum total chars is 13: http://x.yz/a
    if(short_url.match(/[^a-zA-Z0-9:\/._-]/)) return null;// fail if there are unacceptable characters

    $('#short_url_availability_result').html('');
    // if(typeof console == 'object' && typeof console.log == 'function') console.log('Checking availability of ' + short_url);

    var $a = $('#availability_indicator_block');
    $a.css({backgroundColor:'#ffd'});

    return $.ajax({
        type: "GET",
        url: short_url + '~',
        error: function(jqXHR,textStatus,errorThrown){
            if(typeof console == 'object' && typeof console.log == 'function') console.log(textStatus);
            if(typeof console == 'object' && typeof console.log == 'function') console.log(errorThrown);
            $a.css({backgroundColor:'#ecc'});
            $('#short_url_availability_result').html('<b>ERROR: Unable to determine availability</b>');
            // if(typeof console == 'object' && typeof console.log == 'function') console.log('ERROR: Unable to determine availability of this short URL');
            return null;
        },
        success: function(response){
            var r = response;
            var m = r.substring(0,1) - 0;
            var a = (m===0);// interpret returned number of matches as boolean availability
            $a.css({backgroundColor:'#' + (a?'cfd':'fbb')});
            $('#short_url_availability_result').html('<b>' + short_url + '</b> is ' + (a?'available':'already taken'));
            if(!a) setTimeout( function(){ compute_short_code_suggestion(); }, 900);
            // if(typeof console == 'object' && typeof console.log == 'function') console.log('Matches Found: ' + m);
            // if(typeof console == 'object' && typeof console.log == 'function') console.log('Available? ' + (a?'Yes':'No'));
            return a;
        }
    });
}

function is_iterable(obj) {
  return obj != null && typeof obj[Symbol.iterator] === 'function';
}

function is_long_url_acceptable(long_url){// returns true if acceptable, false if not, null if the check cannot happen
    var m = {};
    if(typeof long_url == 'undefined'){
        long_url = $('#canonical_url').val();
        if( long_url.length == 0){
            $('#long_url_acceptability_result').html('<b class="icon36 warning">Please enter the long URL</b>');
            return null;
        }
    }
    if(typeof long_url != 'string'){
        return null;
    }
    m = long_url.match(/(^|https?:\/\/)spe.org/i);
//    console.log(':~326'); console.log(typeof m); console.log(m.length); console.log(m);
    if( is_iterable(m) && m.length > 0 ){ // if someone forgot the www. prefix for www.spe.org, prepend it
        long_url = $('#canonical_url').val().replace(/(^|https?:\/\/)spe.org/i, "$1" + 'www.spe.org');
        $('#canonical_url').val(long_url);
        alert('In the future, remember to use www.spe.org instead of just spe.org');
    }
    m = long_url.match(/^[a-zA-Z]+:/);
//    console.log(':~333'); console.log(typeof m); console.log(m.length); console.log(m);
    if( !is_iterable(m) || m.length == 0 ){ // if someone forgot to enter the scheme:// part, prepend http://
        long_url = 'http://' + $('#canonical_url').val();
        $('#canonical_url').val(long_url);
        alert('In the future, remember to specify the scheme, like "https://" or "http://" or "tel:" or "mailto:", etc.');
    }
    m = long_url.match(/[\?#]$/);
//    console.log(':~340'); console.log(typeof m); console.log(m.length); console.log(m);
    if( is_iterable(m) && m.length > 0) { // strip off a trailing question mark, if any
        long_url = $('#canonical_url').val().replace(/[\?#]$/,'');
        $('#canonical_url').val(long_url);
        alert('In the future, remember to avoid any trailing question mark "?" or octothorpe "#".');
    }
//    console.log(':~346'); console.log(typeof m); console.log(m.length); console.log(m);
    if(long_url.length < 11){ // minimum total chars is 11: http://x.yz
        $('#long_url_acceptability_result').html('<b class="icon36 warning">Please use a fully-qualified URL</b>');
        alert('The URL you provided was too short to be considered acceptable. Minimum is 11 characters including the "http://" part.');
        return null;
    }
    ac = 'a-zA-Z0-9:\/._#?&=~-';
    m = long_url.match(RegExp(ac));
//    console.log(':~354'); console.log(typeof m); console.log(m.length); console.log(m);
    if( is_iterable(m) && m.length > 0) { // fail if there are unacceptable characters
        $('#long_url_acceptability_result').html('<b class="icon36 warning">Acceptable characters are ' + String(ac).replace(/&/g, '&amp;') + '</b>');
        return null;
    }
// function html_entities(str){ return String(ac).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;'); }

    $('#long_url_acceptability_result').html('<b class="icon36 waiting">Attempting to verify the target URL you provided...</b>');

    var $a = $('#acceptability_indicator_block');
    $a.css({backgroundColor:'#ffd'});

    var o = $.ajax({
        type: "GET",
        url: long_url,
        error: function(jqXHR,textStatus,errorThrown){
            if(typeof console == 'object' && typeof console.log == 'function') console.log(textStatus);
            if(typeof console == 'object' && typeof console.log == 'function') console.log(errorThrown);
            $a.css({backgroundColor:'#ecc'});
            $('#long_url_acceptability_result').html('<b class="icon36 warning">ERROR: Unable to test this long URL</b>');
            return null;
        },
        complete: function(jqXHR,response){
            var r = response;
            var a = ( typeof jqXHR.status == 'number' && jqXHR.status == 200 );// interpret returned number of matches as boolean acceptability
            $a.css({backgroundColor:'#' + (a?'cfd':'fbb')});
            $('#long_url_acceptability_result').html('' + (a?'<b>OK</b>: <a href="' + long_url + '" class="icon36 padlock_' + ((long_url.substr(0,5)!='https')?'un':'') + 'locked" target="_blank" valign="center">' + long_url + '</a>' :'<b class="icon36 warning">ERROR: Please verify that you correctly enter the long URL</b>'));
            return a;
        }
    });
}


function add_days_to_date(days, base_date) {
    var days = days || 36;
    var base_date = base_date || new Date();
    var result = new Date(base_date);
    result.setDate(result.getDate() + days);
    return result;
}


function set_end_date_from_campaign_tracking_length(){
    var now = new Date();
    var len = $('#campaign_length_days').val() || 36;
    var end = new Date( now.getTime() + (1000 * 60 * 60 * 24 * len) );
    return $('#end_date').val(end);
}


$(function(){ // as soon as jQuery says the DOM is ready to rock...


//    $('.phase4').hide();
    $('#btn_rebuild_tracking_parameters').hide();


    // if the short base was specified by the view or can be determined by the URL then pre-select that option for the user
{% if short_base_determined %}
    var current_base = '{{ short_base_determined }}'.replace(/shorten(\/.*|$)/,'');
{% else %}
    var current_base = window.location.href.replace(/shorten(\/.*|$)/,'');
{% endif %}
    $('#short_base').find('OPTION')
        .removeProp('selected')
        .filter('[value="' + current_base + '"]')
            .prop('selected','selected');

    // every time the short base or the short code is changed, check to see if the new combo is available
    $('#short_base, #short_base OPTION, #short_code').on('change propertychange',function(){
        if( $('#short_base OPTION:selected').prop('value').trim().length > 0 || $('#short_code').prop('value').trim().length > 0)
            is_short_url_available();
        else return null;
    });

{#    // allow for manually initiating a check, since my automatic way above is apparently not always getting triggered#}
{#    $('#check_short_url_availability').on('click',function(){#}
{#        if( $('#short_base OPTION:selected').prop('value').trim().length > 0 || $('#short_code').prop('value').trim().length > 0)#}
{#            is_short_url_available();#}
{#        else return null;#}
{#    });#}

    // start out with the indicator block being light gray
    $('#availability_indicator_block').css({backgroundColor:'#eee'});

    // every time the long target URL is changed, re-verify it (and if the short code field is empty then suggest one)
    $('#canonical_url').on('change propertychange',function(){
        target_url_verification_helper();
        if( is_long_url_acceptable() && $('#short_code').val()=='' ) compute_short_code_suggestion();
        return true;
    });

    // every time the tracking type is changed, toggle visibility of tracking parameters
    $('#tracking_type').on('change propertychange',function(){
        var v=$(this).find(':selected').prop('value');
        switch(v){
            case 'c':
            case 's':
                return $('#tracking_parameters').slideDown();
            case 'n':
            default:
                return $('#tracking_parameters').slideUp();
        }
    });

    // every time the overarching medium is changed, toggle  availability of appropriate options for more specific medium
    $('#tracking_medium1').on('change propertychange',function(){
        var v=$(this).find(':selected').prop('value');
        toggle_opts_show(v);
        return true;
    });

    // every time the more specific medium is changed, ensure that the overarching medium matches
    $('#tracking_medium2 OPTION').on('change propertychange',function(){
        var c=$(this).parent('OPTGROUP').prop('class').replace(/^show_for_/,'');
        var $tm1 = $('#tracking_medium1');
        if( $tm1.val()=='' ) $tm1.find('OPTION').removeProp('selected').filter('[data-show-for="' + c + '"]').prop('selected','selected');;
        return true;
    });

{#    // every time the campaign/tracking length is changed, set the end_date accordingly#}
{#    $('#campaign_length_days, #campaign_length_days OPTION').on('change propertychange',function(){#}
{#        if( $('#campaign_length_days OPTION:selected').prop('value').trim().length == 0 )#}
{#            set_end_date_from_campaign_tracking_length();#}
{#        else return null;#}
{#    });#}

    // every time a quick-populate span is clicked, populate the specified target with the specified value
    // NOTE: currently only supports INPUT tags -- if we need it for SELECT/OPTION, radios, checkboxes then it'll need extending
    $('SPAN.qp').on('click',function(){
        var s = $(this).data('target-selector');
        var v = $(this).data('target-value');
        $(s).val(v);
        return build_tracking_string();
    });



    function build_tracking_string(){
        var parts = [];

        // source
        var t_s1 = $('#accounting_code').val();
        var t_s2 = $('#tracking_source').val();
        var t_s = ((typeof t_s1=='string' && t_s1.length>0)?t_s1:'') + ' ' + ((typeof t_s2=='string' && t_s2.length>0)?t_s2:'');
        var t_source = t_s.trim().replace(/ +/g,' ').replace('%20',' ').replace(' ','-');
        if(t_source.length) parts.push("utm_source=" + encodeURIComponent( t_source ));

        // medium
        var t_m1 = $('#tracking_medium1').val();
        var t_m2 = $('#tracking_medium2').val();
        var t_m3 = slugify( $('#tracking_medium_other').val() );
        var t_m = ((typeof t_m1=='string' && t_m1.length>0)?t_m1:'') + ((typeof t_m2=='string' && t_m2.length>0)?' ' + t_m2:'') + ((typeof t_m3=='string' && t_m3.length>0)?' ' + t_m3:'');
        var t_medium = t_m.trim().replace(/( |%20)/g,'-').replace(/-+/g,'-');
        if(t_medium.length) parts.push("utm_medium=" + encodeURIComponent( t_medium ));

        // campaign
        var t_campaign = $('#tracking_campaign').val() || '';
        if(t_campaign.length) parts.push("utm_campaign=" + encodeURIComponent( t_campaign.trim().replace(/( |%20)/g,'-').replace(/-+/g,'-') ));

        // term
        var t_t1 = $('#tracking_term1').val();
        var t_t2 = $('#tracking_term2').val();
        var t_t = ((typeof t_t1=='string' && t_t1.length>0)?t_t1:'') + ' ' + ((typeof t_t2=='string' && t_t2.length>0)?t_t2:'');
        var t_term = t_t.trim().replace(/( |%20)/g,'-').replace(/-+/g,'-');
        if(t_term.length) parts.push("utm_term=" + encodeURIComponent( t_term ));

        // content
        var t_c1 = $('#tracking_content1').val();
        var t_c2 = $('#tracking_content2').val();
        var t_c = ((typeof t_c1=='string' && t_c1.length>0)?t_c1:'') + ' ' + ((typeof t_c2=='string' && t_c2.length>0)?t_c2:'');
        var t_content = t_c.trim().replace(/( |%20)/g,'-').replace(/-+/g,'-');
        if(t_content.length) parts.push("utm_content=" + encodeURIComponent( t_content ));

        var t = parts.join('&');
        $('#tracking_string').val(t);
    }
/*
    $('#btn_rebuild_tracking_parameters').click(function(){
        build_tracking_string();
        $(this).fadeOut();
    });
//*/
    $('#tracking_source, #tracking_medium1, #tracking_medium2, #tracking_medium_other, #tracking_term1, #tracking_term2, #tracking_content1, #tracking_content2, #tracking_campaign, #tracking_content1').on('change propertychange', function() {
//        $('#btn_rebuild_tracking_parameters').fadeIn();
        build_tracking_string();
    });

{#    $.ajaxSetup({#}
{#        beforeSend: function(xhr, settings) {#}
{#            if (!(/^https?:.*/.test(settings.url))) {#}
{#                // Only send the token to relative URLs i.e. locally.#}
{#                xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));#}
{#            }#}
{#        }#}
{#    });#}

    //*
    $('#submit_btn').click(function(ev) {
        ev.preventDefault();
        $(this).hide();
        build_tracking_string();

        if( $('#short_code').val() == '' ){
//            $('#short_code').val( compute_short_code_suggestion() );
            compute_short_code_suggestion();
        }

        $.ajax({
            type: "POST",
            url: "/shorten",
            data: {
                'short_base' : $('#short_base').val(),
                'short_code' : $('#short_code').val(),
                'canonical_url' : $('#canonical_url').val(),
                'tracking_type' : $('#tracking_type').val(),
                'tracking_string' : $('#tracking_string').val(),
                'accounting_code' : $('#accounting_code').val(),
                'purpose' : $('#purpose').val(),
                'campaign_length_days' : $('#campaign_length_days').val(),
                'csrfmiddlewaretoken' : $("input[name=csrfmiddlewaretoken]").val()
            },
            success: returnSuccess,
            dataType: 'json'
        });
    });

    // give focus to the input field where a long URL will be entered
    $('#canonical_url').focus();
});

function ymmddhhmm(){
    var d=new Date();
    var y=(("0" + d.getYear()).slice(-1));
    var mx=d.getMonth() + 1;
    var mm=("00" + mx).slice(-2);
    var dd=("00" + d.getDate()).slice(-2);
    var h=("00" + d.getHours()).slice(-2);
    var m=("00" + d.getMinutes()).slice(-2);
    return y + mm + dd + '-' + h + m;
}

function ymm(date_object){
    var d = date_object || new Date();
    var m = d.getMonth() + 1;
    if(m.toString().length == 1) m = "0" + m.toString();
    return d.getFullYear().toString().substr(-1,1) + m;
}

function populateForm(){
    var ts=ymmddhhmm();
    $('#canonical_url').val('http://www.spe.org/events/calendar/?search=ATCE#page_anchor_test_' + ts);
    toggle_pe_sld_for_url();
    $('#accounting_code').val('TST' + ymm());
//    $('#short_base').val('http://www.spe.org/go/');
    $('#tracking_type').val('c');
    $('#tracking_source').val('Fortune ' + ymm() + ' Companies');
    $('#tracking_medium1').val('Web');
    $('#tracking_medium2').val('spe.org_journal-jpt');
    $('#tracking_medium_other').val( 'Article Detail Page Sidebar - 200x40 banner' );
//    $('#tracking_string').val('utm_source=Web&utm_medium=TST611-Web-spe.org_journal-jpt&utm_term=&utm_content=&utm_campaign=TST611-Web-spe.org_journal-jpt-article_detailpurposeage_sidebar_200x40_banner');
    $('#purpose').val('Purpose is to test this system, ' + ts);
    $('#btn_rebuild_tracking_parameters').trigger('click');
    $('#canonical_url').focus();
}

function slugify(raw){
    var chars_accepted = 900, chars_return = 90;
    if(typeof raw != 'string' || raw.length > chars_accepted) return false;
    return raw.toLowerCase().replace(/[^a-z0-9\.-]/g,'_').replace(/__*/g,'_').replace(/_-?_/,'-').replace(/--*/g,'-').slice(0,chars_return);
}

function returnSuccess(data, textStatus, jqXHR) {
  if(data.short_url) {
    var r='/';
    if(document.cookie && typeof document.cookie == 'string' && document.cookie.match(/email=/)){
        var r = document.cookie.match(/email=[^;$]+/)[0].replace(/^email=/,'');
{#        r = ( ( typeof r=='string' && r.indexOf('@') && r.length > 5) || '' ) + '/';#}
        if( typeof r !='string' || !(r.replace('%40','@').indexOf('@') > 0) || r.length <= 5){
            r=false;
        } else {
            r=r.replace('%40','@');
        }
    }
//    $('#url-result').text("Success: created new short URL: " + data.short_url + " &mdash; <button>" + "/" + data.short_code + "</button>");
    var vx = document.documentElement.clientWidth;
    var vy = document.documentElement.clientHeight;
    var vmin = Math.min(0,vx,vy);
    $('#url_result').html('Success: created new short URL <input id="short_url_created" type="text" style="width:36%" value="' + data.short_url + '" /><br /><ul><li><a href="' + data.short_url + '/">Show Details of Final URL</a></li>' + (r ? '<li><a target="_blank" data-short-url="' + data.short_url + '" href="' + data.short_url + '/' + r + '">Email me all the details</a></li><li><a id="qr_code_for_short_url_link" target="_blank" data-short-url="' + data.short_url + '" href="' + data.short_url + '_' + vmin + 'xL.png">Show me this final URL as a QR code</a> <input id="qr_px_square" value="' + vmin + '" /></li>' : '') + '</ul>').find('INPUT').focus().select();
    $('#short_base, #short_code, #canonical_url, #tracking_type, #tracking_string, #accounting_code, #purpose').val('');
    $('#submit_btn').show();
  }
  else {
    $('#url_result').text("Are you trying to shorten nothingness? A blank URL is already pretty short.");
  }

}
$(function(){ // as soon as jQuery says the DOM is ready to rock...
    $('#qr_px_square').on('mouseup change propertychange', function(ev){
        var smin = 90;// minimum pixels (square) supported
        var smax = 990;// maximum pixels (square) supported
        var vx = document.documentElement.clientWidth;
        var vy = document.documentElement.clientHeight;
{#        var vmin = Math.max(smin,Math.min(vx,vy));#}
{#        var vmax = Math.min(smax,Math.max(vx,vy));#}
        var vmin = Math.min(vx,vy);
        var vmax = Math.min(smax,Math.max(vx,vy));
        var v = $(this).find('OPTION:selected').val();
        var s = Math.max(smax,Math.min(v,smin));
        var $t = $('#qr_code_for_short_url_link');
        var upre = $t.prop('data-short-url');
        var u = upre + '_' + s + 'xL.png';
        if( s && s.length > 0 && (s-0) > 0 ) $t.prop('href',u).show(); else $t.hide();
    });
});
</script>

<noscript><div><b style="color:red">The automation features of this form require javascript.</b></div></noscript>

<form method="post">

{#    <noscript><div><b style="color:red">The auto-population features of this form require javascript.</b></div></noscript>#}
{#    <input type="reset" value=" Clear " onclick="javascript:return clearForm(this.form);" />#}
{#    <span onclick="javascript:return populateForm();"><i>QP: Insert Test Values</i></span>#}

    <div class="panel panel-default">
        <div class="panel-body">
            <div class="Xcol-sm-9">


<div class="form-row field-">
    <div>
        <label for="canonical_url"><span class="required" title="Required">*</span> <b>Target URL</b> you want to shorten</label>
        <br />
        <input id="canonical_url" name="canonical_url" type="text" class="form-control input-sm" placeholder="http://www.spe.org/events/calendar/?search=ATCE#page_anchor_test" value="{{ long_url_specified }}" />
{#        <div class="form_help"><small><span title=" Quick Populate, for consistently using common/popular options ">QP</span>:#}
{#            <span class="qp" data-target-selector="#tracking_campaign" data-target-value="">Paste from Clipboard</span>#}
{#            <span class="qp" data-target-selector="#tracking_campaign" data-target-value="dues_re">Dues Renewal Push</span>#}
{#        </small></div>#}
    </div>
    <br /><b id="long_url_acceptability_result"><a title="A 'canonical' URL is *the* official URL for a resource, even though there may be helpers and redirectors making the resource accessible with variations such as via http or https, with or without a trailing slash, etc. -- the URL where people are officially supposed to end up after any and all of that. The consistent use of a canonical URL is critically important to all kinds of analytics and other metrics." href="mailto:webprod@spe.org?subject=please%20explain%20how%20I%20can%20be%20sure%20what%20the%20canonical%20URL%20is">please be consistent: use only canonical URLs</a></b>
</div>



    <section id="purpose_section" class="module aligned" style="padding: 0 0 2.7em;">

        <label class="required" for="purpose"><span class="required" title=" this is a required field ">*</span> Purpose of this particular short URL</label>
        <input class="form-control input-sm" id="purpose" maxlength="252" name="purpose" type="text" placeholder="please describe briefly">
{#        <div class="form_help"><small><span title=" Quick Populate, for consistently using common/popular options ">QP</span>:#}
{#            <span class="qp" data-target-selector="#purpose" data-target-value="Purpose">Purpose</span>#}
{#            <span class="qp" data-target-selector="#purpose" data-target-value="Le But">Le But</span>#}
{#            <span class="qp" data-target-selector="#purpose" data-target-value="Propsito">Propsito</span>#}
{#        </small></div>#}
    </section>

    <section id="purpose_section" class="module aligned hidden" style="padding: 0 0 2.7em;">
        <label class="required" for="campaign_length_days"><span class="required" title=" this is a required field ">*</span> How long do you plan to use this short URL?</label>
        <select name="campaign_length_days" id="campaign_length_days">
            <option value="">- Please select -</option>
            <option value="3">a couple of days</option>
            <option value="9">about a week</option>
            <option value="36" selected="selected">about a month</option>
            <option value="108">about a quarter</option>
            <option value="198">about half a year</option>
            <option value="256">about 9 months</option>
            <option value="378">about a year</option>
            <option value="558">about 18 months</option>
        </select>
        <div class="form_help"><small>This can easily be changed later, if you find that you need it longer, or want to release it sooner.</small></div>
        <script>
$(function(){ // as soon as jQuery says the DOM is ready to rock...
    $('#campaign_length_days').on('mouseup change propertychange', function(ev){
        var v = $(this).find('OPTION:selected').val();
        var t = 18;// threshold (minimum) for how many days out can get notifications
        var $t = $('#expiry_alerts');
        if( v && v.length > 0 && (v-0) > 0 && v > t ) $t.show(); else $t.hide();
    });
});
        </script>
    </section>



    <section id="expiry_alerts" class="module aligned hidden" style="padding: 0 0 2.7em;>

        <label for="expiry_alert_email">Email address for expiry alert</label>
        <input class="form-control input-sm" id="expiry_alert_email" maxlength="252" name="expiry_alert_email" type="text" value="{{ current_logged_user_email }}">
{#        <div class="form_help"><small><span title=" Quick Populate, for consistently using common/popular options ">QP</span>:#}
{#            <span class="qp" data-target-selector="#expiry_alert_email" data-target-value="bfountain@spe.org">bfountain@spe.org</span>#}
{#            <span class="qp" data-target-selector="#expiry_alert_email" data-target-value="webprod@spe.org">webprod@spe.org</span>#}
{#            <span class="qp" data-target-selector="#expiry_alert_email" data-target-value="webcontent@spe.org">webcontent@spe.org</span>#}
{#            <span class="qp" data-target-selector="#expiry_alert_email" data-target-value="ebublick@spe.org">ebublick@spe.org</span>#}
{#        </small></div>#}
        <div class="form_help"><small>Leave this blank if nobody wants a courtesy alert about this short URL prior to its expiration date.</small></div>
    </section>



<div class="form-row field-short_base">
    <div>
        <label class="required" for="short_base">Short URL to create:</label>
        <br />
        <div id="availability_indicator_block">
            <select id="short_base" name="short_base">
<!--
        ("http://2s.pe/","2s.pe"),
        ("http://4s.pe/","4s.pe"),
        ("http://go.spe.org/","GO.spe.org"),
        ("http://www.spe.org/go/","www.SPE.org/go"),
        ("http://go.iptcnet.org/","GO.IPTCnet.org"),
        ("http://www.iptcnet.org/go/","www.IPTCnet.org/go"),
        ("http://go.otcnet.org/","GO.OTCnet.org"),
        ("http://www.otcnet.org/go/","www.OTCnet.org/go"),
        ("http://go.otcbrasil.org/","GO.OTCBrasil.org"),
        ("http://www.otcbrasil.org/go/","www.OTCBrasil.org/go"),
        ("http://go.otcasia.org/","GO.OTCAsia.org"),
        ("http://www.otcasia.org/go/","www.OTCAsia.org/go"),
-->
                <option value="">- Please select -</option>
                <optgroup class="phase0 phase1" label="TESTING ONLY">
                    <option class="phase0" value="http://bfountain-mac.spe.org:8000/">bfountain:8000</option>
                    <option class="phase1" value="http://bfountain-mac.spe.org/">bfountain:80</option>
                </optgroup>
                <optgroup class="phase4" label="Phase 4 Prefixes">
                    <option class="phase4" value="http://2s.pe/">2s.pe</option>
                    <option class="phase4" value="http://4s.pe/">4s.pe</option>
                </optgroup>
                <optgroup class="phase2" label="Phase 2 Prefixes">
                    <option class="phase2" value="http://go.spe.org/">GO.SPE.org</option>
                    <option class="phase2" value="http://go.iptcnet.org/">GO.IPTCnet.org</option>
                </optgroup>
                <optgroup class="phase3" label="Phase 3 Prefixes">
                    <option class="phase3" value="http://www.spe.org/go/" selected="selected">Legacy Prefix: www.SPE.org/go</option>
                    <!-- option class="phase2" value="http://go.iptcnet.org/">GO.IPTCnet.org</option -->
                    <option class="phase3" value="http://www.iptcnet.org/go/">www.IPTCnet.org/go</option>
                    <option class="phase3" value="http://go.otcnet.org/">GO.OTCnet.org</option>
                    <option class="phase3" value="http://www.otcnet.org/go/">www.OTCnet.org/go</option>
                    <option class="phase3" value="http://go.otcbrasil.org/">GO.OTCBrasil.org</option>
                    <option class="phase3" value="http://www.otcbrasil.org/go/">www.OTCBrasil.org/go</option>
                    <option class="phase3" value="http://go.otcasia.org/">GO.OTCAsia.org</option>
                    <option class="phase3" value="http://www.otcasia.org/go/">www.OTCAsia.org/go</option>
                </optgroup>
            </select>

            <small>/</small>

{#            <span style="color:#005;margin:5px;" onclick="$('#short_code').val( compute_short_code_suggestion() );">&#x1F3A9;</span>#}
            <input id="short_code" name="short_code" type="text" class="form-control input-sm" style="display:inline-block;width:36%" maxlength="50" placeholder="join" value="{{ short_code_specified }}" >
            <span style="color:#005;margin:5px;" onclick="compute_short_code_suggestion();"><!-- &#x1F3A9; -->&pi;</span>


{#            <span id="check_short_url_availability">Check Availability</span> #}
            <span id="short_url_availability_result"></span>
        </div>

    </div>
</div>


<fieldset class="module aligned">

    <button id="btn_show_custom_tracking" class="btn btn-default"> Custom Tracking </button></p>

    <div class="form-row field-tracking_type">
        <div>
            <!-- label for="tracking_type">Tracking Type <small style="font-weight: lighter;">&mdash; is it protected behind login, or is there any other reason it requires server-side tracking prior to redirection?</small></label -->
            <br />
            <select id="tracking_type" name="tracking_type">
                <option value="">- Please select -</option>
                <option value="c" selected="selected" title="simply let client do things the normal way">Normal, Client-side tracking</option>
                <option value="s" title="use a server-side interstitial redirect for tracking">Server-side tracking</option>
                <option value="n">No custom tracking parameters</option>
            </select>
        </div>
    </div>



    <section id="tracking_parameters" class="module aligned" style="padding: 0 0 0 7.2em;">

        <label for="accounting_code">Source Prefix &mdash; Accounting/Time/EZLabor Code:</label>
{#        <span style="color:#800;" onclick="$('#accounting_code').val();"></span>#}
        <input class="form-control input-sm" id="accounting_code" maxlength="6" name="accounting_code" type="text">
        <div class="form_help"><small><span title=" Quick Populate, for consistently using common/popular options ">QP</span>:
            <span class="qp" data-target-selector="#accounting_code" data-target-value="ADMIN">ADMIN</span>
            <span class="qp" data-target-selector="#accounting_code" data-target-value="SPEorg">SPEorg</span>
        </small></div>
        <div class="form_help"><small>Leave this blank if you want utm_source to be auto-populated with the referring URLs.</small></div>


        <label for="tracking_source"><b>Source</b> <small style="font-weight: lighter;">&mdash; this is set automatically for web usage (referring URL)</small></label> <span class="email_link_placeholder"></span>
{#        <span style="color:#800;" onclick="$('#tracking_source').val();"></span>#}
        <input id="tracking_source" name="tracking_source" type="text" class="form-control input-sm clearable" />
        <script>
$(function(){ // as soon as jQuery says the DOM is ready to rock...
    $('#tracking_source').on('mouseup change propertychange', function(ev){
        var x = 'source';
        var v = $(this).val();
        var o = new RegExp('^(-$|other)');// regex to determine whether someone picked an "other" option
        var h = ( ( v && typeof v =='string' && v.match(o) )? '<a href="mailto:webprod@spe.org?cc=hdonner@spe.org&cc=ebublick@spe.org&cc=bfountain@spe.org&subject=' + encodeURIComponent('[purly] new tracking option for ' + x.toUpperCase()) + '&body=' + encodeURIComponent('Please consider extending our tool to offer another ' + x.toUpperCase() + ' option: ') + '" title="compose an email">need a new option?</a>' : '<!-- no email link needed -->');
        var $t = $(this).next('.email_link_placeholder');
        return $t.html(h);
    });
});
        </script>
        <div class="form_help"><small><span title=" Quick Populate, for consistently using common/popular options ">QP</span>:
            <span class="qp" data-target-selector="#tracking_source" data-target-value="">blank</span>
            <span class="qp" data-target-selector="#tracking_source" data-target-value="newsletter">newsletter</span>
{#            <span class="qp" data-target-selector="#tracking_source" data-target-value="newsletter">newsletter</span>#}
        </small></div>
        <div class="form_help"><small>
            Leave this blank if you want utm_source to be auto-populated with the referring URLs.
        </small></div>
        <br />

        <label for="tracking_medium1"><span class="required" title=" this is a required field ">*</span> <b>Medium</b> <small style="font-weight: lighter;">&mdash; how/where this special-purpose URL will be disseminated</small></label>
        <br />
        <select name="tracking_medium1" id="tracking_medium1" class="q-select">
            <option value="">- Please select -</option>
            <option value="Email" data-show-for="email">via email</option>
            <option value="Web" data-show-for="web">via the web</option>
            <option value="Print" data-show-for="print">via printed material</option>
            <option value="Social" data-show-for="social">via social media</option>
            <option value="other" data-show-for="other">via another avenue</option>
        </select>
        <span class="email_link_placeholder"></span>
        <br />
        <script>
$(function(){ // as soon as jQuery says the DOM is ready to rock...
    $('#tracking_medium1').on('mouseup change propertychange', function(ev){
        if (ev.type !='mouseup') $('#tracking_medium2 OPTION').removeProp('selected').find('[value=""]').prop('selected','selected');
        var x = 'medium1';
        var v = $(this).find('OPTION:selected').val();
        var o = new RegExp('^(-$|other)');// regex to determine whether someone picked an "other" option
        var h = ( ( v && typeof v =='string' && v.match(o) )? '<a href="mailto:ebublick@spe.org?cc=webprod@spe.org&subject=' + encodeURIComponent('[purly] new tracking option for ' + x.toUpperCase()) + '&body=' + encodeURIComponent('Please consider extending our tool to offer another ' + x.toUpperCase() + ' option: ') + '" title="compose an email">need a new option?</a>' : '<!-- no email link needed -->');
        var $t = $(this).next('.email_link_placeholder');
        return $t.html(h);
    });
});
        </script>

        <!-- label for="tracking_medium2"><span class="required" title="Required">*</span> <b>Medium</b> -- where will this special-purpose URL be disseminated?</label -->
        <select name="tracking_medium2" id="tracking_medium2">
            <option value="">- Please select -</option>
            <optgroup class="show_for_email" label="Email">
                <option value="prm"> via Promotional/Marketing blast</option>
                <option value="jpt"> via JPT email</option>
                <option value="ogf"> via OGF email</option>
                <option value="hse"> via HSE Now email</option>
                <option value="twa"> via TWA email</option>
                <option value="rdn"> via Regional/Discipline eNewsletter</option>
                <option value="other.email"> other email avenue ...</option>
            </optgroup>
            <optgroup class="show_for_web" label="Web">
                <option value="ADBNR" class="old_option"> generic ad banner</option>
                <option value="spe.org"> on SPE.org</option>
                <option value="spe.org_journal_jpt"> on spe.org JPT site</option>
                <option value="spe.org_journal_ogf"> on spe.org OGF site</option>
                <option value="spe.org_journal_hse"> on spe.org HSE Now site</option>
                <option value="spe.org_journal_twa"> on spe.org TWA site</option>
                <option value="spe.org_journal"> on another spe.org Journal</option>
                <option value="onepetro.org"> on OnePetro.org</option>
                <option value="petrowiki.org"> on PetroWiki.org</option>
                <option value="otcnet.org"> on OTCnet.org</option>
                <option value="iptcnet.org"> on IPTCnet.org</option>
                <option value="store.spe.org"> on spe.org Bookstore</option>
                <option value="other.in-house"> on another SPE website ...</option>
                <option value="other.3rd-party"> on another non-SPE website ...</option>
            </optgroup>
            <optgroup class="show_for_social" label="Social Media">
                <option value="spe-connect"> on SPE Connect</option>
                <option value="blogger" class="more_options"> on Blogger</option>
                <option value="facebook"> on Facebook</option>
                <option value="flickr" class="more_options"> on Flickr</option>
                <option value="googleplus" class="more_options"> on Google+</option>
                <option value="instagram" class="more_options"> on Instagram</option>
                <option value="linkedin"> on LinkedIn</option>
                <option value="pinterest" class="more_options"> on Pinterest</option>
                <option value="quora" class="more_options"> on Quora</option>
                <option value="snapchat" class="more_options"> on Snapchat</option>
                <option value="spotify" class="more_social_options"> on Spotify</option>
                <option value="tumblr" class="more_social_options"> on Tumblr</option>
                <option value="twitter"> on Twitter</option>
                <option value="vimeo" class="more_options"> on Vimeo</option>
                <option value="vine" class="more_options"> on Vine</option>
                <option value="whatsapp" class="more_options"> on WhatsApp</option>
                <option value="youtube"> on YouTube</option>
                <option value="other.social"> other social media ...</option>
            </optgroup>
            <optgroup class="show_for_print" label="Print">
                <option value="AD3V" class="old_option"> Third vertical print ad</option>
                <option value="ADFP" class="old_option"> Full page print ad</option>
                <option value="ADHH" class="old_option"> Half page horizontal print ad</option>
                <option value="ADOTH" class="old_option"> Other print ad (square, island, half page vertical)</option>
                <option value="ADQP" class="old_option"> Quarter page print ad</option>
                <option value="ART" class="old_option"> Design (logo, artwork, graphics, etc.)</option>
                <option value="BRO" class="old_option"> Brochure</option>
                <option value="CAT" class="old_option"> Catalog</option>
                <option value="EXP" class="old_option"> Exhibitor Prospectus</option>
                <option value="FLD" class="old_option"> Folder</option>
                <option value="FLR" class="old_option"> Flyer (full page, half page, etc.)</option>
                <option value="FRM" class="old_option"> Form (application, registration, invoice, etc.)</option>
                <option value="MAGCAR" class="old_option"> Carrier Sheet</option>
                <option value="OTHCOM" class="old_option" class="more_options"> Other company/admin items such as letterhead, cert</option>
                <option value="OTHMKT" class="old_option" class="more_options"> Other marketing items such as CD, buckslip, bookma</option>
                <option value="PST" class="old_option"> Postcard, postcard mailer</option>
                <option value="PRG" class="old_option"> Program</option>
                <option value="PRV" class="old_option"> Preview</option>
                <option value="contact_card"> on contact card or business card</option>
                <option value="poster"> on a poster</option>
                <option value="sign"> on a sign</option>
                <option value="billboard"> billboard</option>
                <option value="car_wrap"> car wrap</option>
                <option value="window_decal"> window decal</option>
                <option value="floor_decal"> floor decal</option>
                <option value="other.print"> on another print piece ...</option>
            </optgroup>
            <optgroup class="show_for_other" label="Digital/Other">
                <option value="usb"> file on a USB stick</option>
                <option value="cd"> file on a CD</option>
                <option value="contact_file"> file of contact details (e.g., a .vcf)</option>
                <option value="guest_wifi"> guest WiFi splash screen</option>
                <option value="other.other"> other ...</option>
            </optgroup>
        </select>
        <span class="email_link_placeholder"></span>
        <br />
        <script>
$(function(){ // as soon as jQuery says the DOM is ready to rock...
    $('#tracking_medium2').on('mouseup change propertychange', function(ev){
        var x = 'medium2';
        var v = $(this).find('OPTION:selected').val();
        var o = new RegExp('^(-$|other)');// regex to determine whether someone picked an "other" option
        var h = ( ( v && typeof v =='string' && v.match(o) )? '<a href="mailto:ebublick@spe.org?cc=webprod@spe.org&subject=' + encodeURIComponent('[purly] new tracking option for ' + x.toUpperCase()) + '&body=' + encodeURIComponent('Please consider extending our tool to offer another ' + x.toUpperCase() + ' option: ') + '" title="compose an email">Need a new option?</a>' : '<!-- no email link needed -->');
        var $t = $(this).next('.email_link_placeholder');
        return $t.html(h);
    });
});
        </script>

        <label for="tracking_medium_other"><b>More Medium Detail</b> <small style="font-weight: lighter;">&mdash; totally optional; recommended if you picked &quot;other&quot; above</small></label>
{#        <span style="color:#800;" onclick="$('#tracking_medium_other').val();"></span>#}
        <input id="tracking_medium_other" name="tracking_medium_other" type="text" class="form-control input-sm clearable" />
        <br />

        <label for="tracking_campaign"><b>Campaign Name</b></label>
        <input id="tracking_campaign" name="tracking_campaign" type="text" class="form-control input-sm clearable" />
        <div class="form_help"><small><span title=" Quick Populate, for consistently using common/popular options ">QP</span>:
            <span class="qp" data-target-selector="#tracking_campaign" data-target-value="spring_sale">Spring Sale</span>
            <span class="qp" data-target-selector="#tracking_campaign" data-target-value="dues_re">Dues Renewal Push</span>
        </small></div>
        <div class="form_help"><small>The product, promo code, or slogan<!-- (e.g. spring_sale) --></small></div>
        <br />

        <label for="tracking_term1"><b>Campaign Term</b> <small style="font-weight: lighter;">&mdash; Identify the paid keywords, if any</small></label>
        <input id="tracking_term1" name="tracking_term1" type="text" class="form-control input-sm clearable" />
        <div class="form_help"><small><b style="color:red">Please leave this </b>
            <span class="qp" data-target-selector="#tracking_term1" data-target-value="">blank</span>
            unless we actually did pay for some keywords (not counting Google AdWords)
        </small></div>
        <br />


        <label for="tracking_content1"><b>Campaign Content</b> <small style="font-weight: lighter;">&mdash; Use to differentiate ads. A/B testing, content-targeted ads.</small></label>
        <input id="tracking_content1" name="tracking_content1" type="text" class="form-control input-sm clearable" />
        <div class="form_help"><small><span title=" Quick Populate, for consistently using common/popular options ">QP</span>:
            <span class="qp" data-target-selector="#tracking_content1" data-target-value="C_text_link">Text Link</span>
            <span class="qp" data-target-selector="#tracking_content1" data-target-value="C_image_link">Image Link</span>
            <span class="qp" data-target-selector="#tracking_content1" data-target-value="C_qr_code">QR Code</span>
        </small></div>

    </section>

    <!-- label for="tracking_string">Tracking Parameters </label -->
    <input id="tracking_string" name="tracking_string" type="text" class="form-control input-sm borderless" placeholder="" />
    <span id="btn_rebuild_tracking_parameters">&#8665;</span>

<!--
    <div class="form-row field-short_base">
        <div>
            <label class="required" for="short_base">Desired "base" or "prefix" for your short URL:</label>
            <br />
            <div class="related-widget-wrapper">
                <select id="short_base" name="short_base">
                    <option value="">- Please select -</option>
                    <option value="http://www.spe.org/go/" selected="selected">Legacy Prefix: <b>www.spe.org/go</b></option>
{#                    <option value="http://go.spe.org/">Possible Alternate Prefix: <b>go.spe.org</b></option>#}
{#                    <option value="http://2s.pe/">Tiny Prefix for Internal Destinations ("to" SPE): <b>2s.pe</b></option>#}
{#                    <option value="http://4s.pe/">Tiny Prefix for External Destinations ("for" SPE): <b>4s.pe</b></option>#}
                </select>
            </div>
        </div>
    </div>

    <div class="form-row field-short_code">
        <div>
            <label class="required" for="short_code">Desired "short code" for your short URL:</label>
            <input id="short_code" name="short_code" type="text" class="vTextField" maxlength="50" placeholder="atce" >
        </div>
    </div>
-->

</fieldset>




<button id="submit_btn" class="btn btn-primary"> Shorten </button></p>
{% csrf_token %}


            </div>
        </div>
        <div class="panel-footer"><span id="url_result">&middot;</span></div>
    </div>
</form>
{% endblock %}
